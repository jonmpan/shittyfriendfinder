<!DOCTYPE html>
<html>

<head>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>

    <link type="text/css" rel="stylesheet" href="style.css">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style type="text/css">

  .no-bottom-margin{
    margin-bottom: 0px;
  }

  .no-margin{
    margin:0px;
  }

  .no-padding{
    padding:0;
  }
  .some-padding{
    padding:25px;
  }
  .smol-bottom-margin{
    margin-bottom: 20px;
  }
</style>
</head>

<body>
<div class="content">
        <div class="bg"></div>
        <!-- <div class="bg2"></div> -->
        <div class="navbar-fixed">
          <nav>
              <div class="nav-wrapper custom-white-navbar">
                  <a href="/" class="brand-logo"><img class="responsive-img" src="pooplogo.png"></a>
                  <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
                  <ul id="nav-mobile" class="right hide-on-med-and-down">
                      <li><a href="/" class="white-text">Home</a></li>
                      <li><a href="/api" class="white-text">API</a></li>
                      <li><a href="/survey" class="white-text">Survey</a></li>
                  </ul>
                  <ul class="side-nav" id="mobile-demo">
                      <li><a href="/" class="white-text">Home</a></li>
                      <li><a href="/api" class="white-text">API</a></li>
                      <li><a href="/survey" class="white-text">Survey</a></li>
                  </ul>
              </div>
          </nav>
        </div>
        <h4 class=" no-margin some-padding white-text">Amazingly Shitty Friends Await You!</h4>
        <div  id="insert-friends-here">
<!--             <div class="row">
                <div class="progress no-margin">
                    <div class="indeterminate"></div>
                </div>
                <div class="col s6 m4">
                    <div class="card large">
                        <div class="card-image">
                            <img src="http://peachbeachsplash.com/images/contestants-team-gessen-4-shiki.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title">Card Title</span>
                            <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
                        </div>
                    </div>
                </div>
                <div class="col s6 m4">
                    <div class="card large">
                        <div class="card-image">
                            <img src="background.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title">Card Title</span>
                            <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
                        </div>
                    </div>
                </div>
                <div class="col s6 m4">
                    <div class="card large">
                        <div class="card-image">
                            <img src="http://peachbeachsplash.com/images/contestants-team-gessen-3-yozakura.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title">Card Title</span>
                            <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                 <div class="progress">
                    <div class="indeterminate"></div>
                </div>
                <div class="col s6 m4">
                    <div class="card large">
                        <div class="card-image">
                            <img src="http://peachbeachsplash.com/images/contestants-team-gessen-5-minori.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title">Card Title</span>
                            <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
                        </div>
                    </div>
                </div>
                <div class="col s6 m4">
                    <div class="card large">
                        <div class="card-image">
                            <img src="background.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title">Card Title</span>
                            <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
                        </div>
                    </div>
                </div>
                <div class="col s6 m4">
                    <div class="card large">
                        <div class="card-image">
                            <img src="background.jpg">
                        </div>
                        <div class="card-content">
                            <span class="card-title">Card Title</span>
                            <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
        
    </div>
<div class="navbar">
  <nav>
      <div class="nav-wrapper black white-text footer-style">
          copyright nobody
      </div>
  </nav>
</div>
</body>

<script type="text/javascript">
window.onbeforeunload = function () {
  window.scrollTo(0, 0);
}

$(document).ready(function(){
    // Init Carousel
    $('.carousel').carousel();

    // Init Carousel Slider
    $('.carousel.carousel-slider').carousel({fullWidth:true});

    // Fire off toast
    //Materialize.toast('Hello World', 3000);

    // Init Slider
    $('.slider').slider();

    // Init Modal
    $('.modal').modal();

    // Init Sidenav
    $('.button-collapse').sideNav();

    $(function () {
      $(document).scroll(function () {
        var $nav = $(".custom-white-navbar");
        $nav.toggleClass('scrolled', $(this).scrollTop() > $nav.height());
      });
    });
});

$.get('/api',function(data){
  console.log(data);
}).then((data)=>{
  appendFriends(shuffle(data))
});
var offset = 0;

function appendFriends(data){
  console.log(data);
  for(var i = offset; i<30; i+=3){
    offset += 30;
    console.log('group'+i);
    if(data[i]){
      var abomination = '<div class="row" id="group'+i+'"></div>';
      $('#insert-friends-here').append(abomination);
      var friendAbomination0 = '<div class="col s6 m4"><div class="card large"><div class="card-image"><img src="'+data[i].imageURL+'"></div><div class="card-content"><span class="card-title">'+data[i].name+'</span><p>'+data[i].description+'</p></div></div></div>';
      $('#group'+i).append(friendAbomination0);
      console.log(i);
    }
    if(data[i+1]){
      var friendAbomination1 = '<div class="col s6 m4"><div class="card large"><div class="card-image"><img src="'+data[i+1].imageURL+'"></div><div class="card-content"><span class="card-title">'+data[i+1].name+'</span><p>'+data[i+1].description+'</p></div></div></div>';
      $('#group'+i).append(friendAbomination1);
      console.log(i+1);
    }
    if(data[i+2]){
      var friendAbomination2 = '<div class="col s6 m4"><div class="card large"><div class="card-image"><img src="'+data[i+2].imageURL+'"></div><div class="card-content"><span class="card-title">'+data[i+2].name+'</span><p>'+data[i+2].description+'</p></div></div></div>'
      $('#group'+i).append(friendAbomination2);
      console.log(i+2);
    }
  }
}

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>

</body>
</html>